# 2025-07-11
## :family: Participants (GitHub handles preferred)

- @jschoone
- @garloff

## :house: Housekeeping
- Hacking session on 2025-05-17 10:05 CEST to finalize `--dependency-update` and `scs2` cluster stack series

## :notebook: Agenda

### Testing `--dependency-update` [CSO/PR #296](https://github.com/SovereignCloudStack/cluster-stack-operator/pull/296)
* CSO should download charts as instructed by `Charts.yaml` instead of relying on already present charts in `charts/` directory
	* Used to deploy cluster add-ons
	* Can now use `hack/generate_version.py` without `--build`
	* Sidenote: `helm template` seems to require `--release-name` for autocompletion to work
* For testing:
  values.yaml
  ```yaml
  clusterStackVariables:
    ociRepository: registry.scs.community/kaas/cluster-stacks
  controllerManager:
    manager:
      image:
        repository: ghcr.io/sovereigncloudstack/cso-staging
        tag: sha-6089e43
    rbac:
      additionalRules:
        - apiGroups:
            - "openstack.k-orc.cloud"
          resources:
            - "images"
          verbs:
            - create
            - delete
            - get
            - list
            - patch
            - update
            - watch
  ```

  clusterstack.yaml
  ```yaml
  apiVersion: clusterstack.x-k8s.io/v1alpha1
  kind: ClusterStack
  metadata:
    name: openstack
    namespace: cluster
  spec:
    provider: openstack
    name: scs
    kubernetesVersion: "1.32"
    channel: custom
    autoSubscribe: false
    noProvider: true
    versions:
      - v0-sha.f98flsd
  ```
  ```yaml
  apiVersion: cluster.x-k8s.io/v1beta1
  kind: Cluster
  metadata:
    name: my-cluster
    namespace: cluster
    labels:
      managed-secret: cloud-config
  spec:
    clusterNetwork:
      pods:
        cidrBlocks:
        - "172.16.0.0/16"
      serviceDomain: cluster.local
      services:
        cidrBlocks:
        - "10.96.0.0/12"
    topology:
      class: openstack-scs-1-32-v0-sha.f98flsd
      controlPlane:
        replicas: 1
      version: v1.32.3
      workers:
        machineDeployments:
          - class: default-worker
            name: md-0
            replicas: 1
  ```
  * Test result: helm lacks repos, it can not write to its repository cache `/.cache/`, parameter `--repository-cache` does not seem to fully resolve this
