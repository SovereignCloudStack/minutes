# 2023-08-31
## :family: Participants (github handles preferred)
- @NotTheEvilOne
- @ppkuschy
- @o-otte
- @DEiselt
- @batistein
- @tonifinger
- @jschoone
- @FriederikeZelke
- @jnull
- @fdobrovolny
- @garloff
- @matofeder
- @joshmue
- @chess-knight

## :telephone: Community call and minutes transfer
* @jschoone

## :notebook: Agenda

### R5 release tasks

[Board of Jena](https://github.com/orgs/SovereignCloudStack/projects/6/views/35)

#### Updates/tests that should be performed before R5

- Update k8s-capi R5 release notes: [#482](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/issues/482)
    - AI @fdobrovolny: Create a PR draft and add at least placeholders that should be filled (take inspiration from R4 release notes)
    - AI @dnation: Go through PRs since R4 and double-check whether all "main" features are mentioned there
        - Please contribute!

- Updating k8s-capi software ahead of the release
    * k8s (v1.2y.x)
        * Go with 1.27.x (x=latest) as default, only go to 1.28.x IF we get sufficient confidence and official capo support for it (otherwise mark 1.28 as preview - `--allow-preview-versions`)
        * Mention that 1.25 goes out of maintenance soon
    * capi, capo
    * occm, cinder-csi, ...
    * kind
    * cilium, calico
    * nginx ingress
    * flux2
    * cert-manager
    * harbor
        * Done :white_check_mark: 
    * mgmthost-tools: sonobuoy, helm, k9s
    * Defaults?
    * terraform requirement: >= 1.4, add <1.6 (to protect our users from accidentially using unfree BSL licensed code)
        * Done (To Do: Adjust this if 1.5.6+ do turn out not to be free. Mdium-term: Switch to OpenTF ... )
    - AI @chess-knight: will take care of the above (one PR per item in the list)

- Update k8s-capi v5 maintained branches:
    - AI @fdobrovolny: close [#443](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/issues/443) - DONE
    - AI @fdobrovolny: open new issue and addressed it: "Update v5 maintained branches" with a new list of PRs which need to be backported (@matofeder will sent a nice looking table of PRs generated by custom script)
        - k8s-cluster-api-provider/[#529](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/issues/529) - Create Backport sprint Gothenburg to maintained branches
        - k8s-cluster-api-provider/[#530](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/issues/530) - Create Backport sprint Hobart to maintained branches
        - k8s-cluster-api-provider/[#531](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/issues/531) - Create Backport sprint Izmir to maintained branches
        - k8s-cluster-api-provider/[#532](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/issues/532) - Create Backport sprint Jena to maintained branches
    - AI @fdobrovolny: run conformance test on both v5 maintained branches

- k8s-capi R5 release:
    - AI @fdobrovolny: create release candidate TAG v6.0.0-rc1 and run conformance test on it
        - Goal: Next week (cwk 36)
    - AI @fdobrovolny: promote v6.0.0-rc1 to v6.0.0 when everything looks good
        - Otherwise and -rc2 could be cut

- Test R4-to-R5.sh k8s-capi script [#521](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/issues/521)
    - AI @matofeder: update git patch files
    - AI @NotTheEvilOne & @chess-knight: test it after @matofeder update of patch files
        - Should get more testing

- AI: @garloff to ask users for testing
    - Early adopters now
    - All with the RC next week
    
#### Expected features that should be merged and tested before R5

- Automated CI testing EPIC (via SCS Zuul) [#378](https://github.com/SovereignCloudStack/issues/issues/378)
    - AI @matofeder: Create PRs in k8s-cluster-api-provider and scs/zuul-config based on the Zuul PoC presented on Monday.
        - PR [zuul-config/#21](https://github.com/SovereignCloudStack/zuul-config/pull/21)
            - reviewied and approved by @DEiselt and @fdobrovolny - ready to merge
        - Draft PR [k8s-cluster-api-provider/#534](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/pull/534)
            - Code part - DONE and tested using dNation [zuul instance](http://213.131.230.109:9000/t/mfederorg/builds), and k8s-capi [fork](https://github.com/matofederorg/k8s-cluster-api-provider/), see e.g. how zuul reports sonobouy results [here](https://github.com/matofederorg/k8s-cluster-api-provider/pull/14)
                - Nice to have logs as warning :thumbsup:
            - Docs part - in progress
            - Some YAML cleanups to be done
    - Copy/Move over to the SCS zuul instance
        - Needs work; SCS zuul has long queue
        - Hack session Gonicus, dNation wanted (AI @jschoone to set up)
    

#### Bugs that should be investigated/fixed before R5

- flavor_disk.sh Installs jq when it is missing [#524](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/pull/524) - Done :white_check_mark: 
    - Fix has to be merged to the main before R5 and has to be backported to maintained branch `maintained/v5.x`
    - AI @chess-knight: review - DONE :white_check_mark: 

- Cilium-operator pod in CrashLoopBackOff [#514](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/issues/514)
    - It seems that cilium networking in k8s cluster works, but cilium-operator pod is in CrashLoopBackOff which may caused some unexpected issues
    - AI @fdobrovolny: report this to Jan - DONE :white_check_mark:
    - Needs further investigation, there may be logic errors in the scripts, or trouble with cilium autodetection ... CrashLoopBackOff needs to be addressed (at least for the default settings) before R5, with a rollback if we don't understand the issue well by the end of this sprint.

Optional (not mandatory to address):

- Enhance make create to use actual commit for checkout [#523](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/pull/523)
    - Fix optionally could be be merged to the main (not mandatory) before R5 and may to be backported to maintained branches as well: `maintained/v5.x` and `maintained/v5.0.x`
    - AI @chess-knight: review 

- Memory limits for kube-apiserver [#516](https://github.com/SovereignCloudStack/k8s-cluster-api-provider/issues/516)


